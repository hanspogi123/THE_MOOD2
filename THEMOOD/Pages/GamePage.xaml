<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="THEMOOD.Pages.GamePage"
             Shell.NavBarIsVisible="False"
             xmlns:viewmodels="clr-namespace:THEMOOD.ViewModels"
             NavigationPage.HasNavigationBar="False">
    <Grid x:Name="MainGrid" RowDefinitions="Auto,*,Auto" BackgroundColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource Black}}">
        <Grid x:Name="HeaderGrid" ColumnDefinitions="Auto,*,Auto">
            <Button x:Name="BackButton"
                    Grid.Column="0"
                    Text="←"
                    FontSize="24"
                    TextColor="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}"
                    BackgroundColor="Transparent"
                    Margin="10,5"
                    Clicked="BackButton_Clicked"/>

            <VerticalStackLayout Grid.Column="1" HorizontalOptions="Center" VerticalOptions="Center">
                <Label x:Name="ScoreLabel"
                       Text="Score: 0"
                       FontSize="24"
                       FontAttributes="Bold"
                       TextColor="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center"
                       Margin="0,5"/>
                <Label x:Name="TimerLabel"
                       Text="Time: 45"
                       FontSize="18"
                       TextColor="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center"/>
                <Label x:Name="HighScoreLabel"
                       Text="High Score: 0"
                       FontSize="16"
                       FontAttributes="Italic"
                       TextColor="{AppThemeBinding Light={StaticResource Gray}, Dark={StaticResource LightGray}}"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center"/>
            </VerticalStackLayout>
            <!-- Add a spacer in Grid.Column="2" to balance the BackButton -->
            <BoxView Grid.Column="2" 
                     WidthRequest="{Binding Source={x:Reference BackButton}, Path=Width}" 
                     BackgroundColor="Transparent" />

        </Grid>

        <AbsoluteLayout x:Name="GameArea"
                        Grid.Row="1"
                        HorizontalOptions="Fill"
                        VerticalOptions="Fill">
            <!-- Bubbles will be added here dynamically -->
        </AbsoluteLayout>

        <Button x:Name="StartButton"
                Grid.Row="2"
                Text="Start Game"
                BackgroundColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource Primary}}"
                TextColor="White"
                FontAttributes="Bold"
                CornerRadius="20"
                Padding="20,12"
                Margin="40,15"
                HorizontalOptions="Center"
                Clicked="StartButton_Clicked"/>
    </Grid>
</ContentPage>